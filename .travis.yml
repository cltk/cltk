sudo: required

language: python

python:
- '3.6'

before_install:
- sudo rm -f /etc/boto.cfg

cache:
    directories:
        - $HOME/.cache/pip
        - /home/travis/cltk_data

install:
- pip install -U pip wheel
- pip install --requirement=$TRAVIS_BUILD_DIR/requirements.txt
- python setup.py install

before_script:
- python install_corpora.py

script:
  # Notes on nose:
  # Travis CI pre-installs `nose`
  # https://github.com/coagulant/coveralls-python#nosetests
  # http://nose.readthedocs.org/en/latest/plugins/skip.html
- nosetests --no-skip --with-coverage --cover-package=cltk --with-doctest
- ( cd docs && make doctest; )

after_success:
- codecov

deploy:
  provider: pypi
  user: kyle_johnson
  edge:
    branch: v1.8.45
  on:
    branch: master
  password:
    secure: E67ydyMC4HHeJoT8iMwGosS5cd3I1Fd0+FCEmJLsqHWJQ5/ARpPQHh9YSTelWKJg11OQHeIy+4/ny4QR+uPNZ1Ina0iQzdVoqOzPRHyvcahUz4a0t0l27bYwBXVugtZ4BQP7VlH9l5Mt/R9CFp0oV4lPW22s19BJsso+FKCzeoA=
